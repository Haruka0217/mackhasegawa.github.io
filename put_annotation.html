<html>
<head>
<title>付箋の添付（モネ：日傘の女）</title>

</head>
<body>

<input type="text" id="annotation" size="80" value="コメントを入れて添付場所をクリックしてください．" /><br>
<img src="https://stat.ameba.jp/user_images/20130312/10/tiffany-the-true-love/22/aa/j/o0800119312454084789.jpg?caw=800" height="700"><br>
<!-- 画像ファイルのURLを変更する -->
<input type="text" id="im_url" size="80" value="画像のURL入力し，エンターを押してください．" onkeypress="img_set(event.keyCode);" /><br>
X座標：<input type="text" id="txtX" />
Y座標：<input type="text" id="txtY" /><br>	
<FORM NAME="results"> 
	<TEXTAREA NAME="msg" ROWS="10" COLS="80"></TEXTAREA>
</FORM>
<a href="https://mackhasegawa.github.io/show_annotation.html">[付箋の表示]</a><br>

<div id="myText" style="POSITION: absolute; Z-INDEX: 2; VISIBILITY: visible; TOP: -1000px; LEFT: 0px;">
<input type="text" size="40" id="fusen" />
</div>
	
<script type="text/javascript">
<!--
	var file_name = "日傘の女";
		
	window.onload=function(){
		//マウス移動時のイベントをBODYタグに登録する
		document.body.addEventListener("click", function(e){
			// 座標のオフセット
			var offsetX = 8;
			var offsetY = 32;
			//座標を取得する
			var mX = e.pageX-offsetX;  //X座標
			var mY = e.pageY-offsetY;  //Y座標
			//座標を表示する
			document.getElementById("txtX").value = mX;
			document.getElementById("txtY").value = mY;
			var r = mX.toString().concat(",");
			r = r.concat(mY.toString());
			r = r.concat(",");
			r = r.concat(document.getElementById("annotation").value);
			r = r.concat("\n");
			var tmp = document.results.msg.value;
			r = tmp.concat(r);
			document.results.msg.value = r;

			m = document.getElementById("annotation").value;
			document.getElementById("fusen").value = m;
			document.getElementById("myText").style.left = mX;
			document.getElementById("myText").style.top = mY;
			document.getElementById("annotation").value = "ここにコメントを入れて添付場所をクリックしてください．";
			//tweet(r);
	
		
		});
	}

	function tweet(r){
		var result = r;
		var tag = "&hashtags=TDU_hasegawaLAB_annotation_";
		tag = tag.concat(file_name);
		//location.href = "https://twitter.com/intent/tweet?text="+ encodeURIComponent(result) +"&hashtags=TDU_hasegawaLAB_annotation";
		window.open("https://twitter.com/intent/tweet?in_reply_to=900265578979393541&text="+ encodeURIComponent(result) +tag);

	}
	
	function img_set(code){
		//エンターキー押下なら
		if(13 === code){
			alert("エンターキーが押されたよ！");
		}
	}
// -->
</script>
	

	
</body>
</html>
